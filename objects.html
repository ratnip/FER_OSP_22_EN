<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8 Object oriented systems in R | Let’s program in R</title>
  <meta name="description" content="R Coursebook" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="8 Object oriented systems in R | Let’s program in R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="R Coursebook" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8 Object oriented systems in R | Let’s program in R" />
  
  <meta name="twitter:description" content="R Coursebook" />
  

<meta name="author" content="Damir Pintar" />


<meta name="date" content="2022-12-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="user.html"/>
<link rel="next" href="pipe.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>

<style type="text/css">
.showopt {
  background-color: #004c93;
  color: #FFFFFF; 
  width: 140px;
  height: 4	0px;
  text-align: center;
  vertical-align: middle !important;
  float: right;
  font-family: sans-serif;
  font-size:10 pt;
  border-radius: 8px;
}

.showopt:hover {
    background-color: #dfe4f2;
    color: #004c93;
}

pre.plot {
  background-color: white !important;
}
</style>

<script>
 $(document).ready(function() {

  $chunks = $('.fold');

  $chunks.each(function () {

    // add button to source code chunks
    if ( $(this).hasClass('s') ) {
      $('pre.r', this).prepend("<div class=\"showopt\">Show solution</div><br style=\"line-height:22px;\"/>");
      $('pre.r', this).children('code').attr('class', 'folded');
    }

    // add button to output chunks
    if ( $(this).hasClass('o') ) {
      $('pre:not(.r)', this).has('code').prepend("<div class=\"showopt\">Show results</div><br style=\"line-height:22px;\"/>");
      $('pre:not(.r)', this).children('code:not(r)').addClass('folded');

      // add button to plots
      $(this).find('img').wrap('<pre class=\"plot\"></pre>');
      $('pre.plot', this).prepend("<div class=\"showopt\">Show figure</div><br style=\"line-height:22px;\"/>");
      $('pre.plot', this).children('img').addClass('folded');

    }
  });

  // hide all chunks when document is loaded
  $('.folded').css('display', 'none')

  // function to toggle the visibility
  $('.showopt').click(function() {
    var label = $(this).html();
    if (label.indexOf("Show") >= 0) {
      $(this).html(label.replace("Show", "Hide"));
    } else {
      $(this).html(label.replace("Hide", "Show"));
    }
    $(this).siblings('code, img').slideToggle('fast', 'swing');
  });
});
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>(“Statistical Programming Fundamentals” course book)</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#foreword"><i class="fa fa-check"></i>Foreword</a></li>
</ul></li>
<li class="part"><span><b>I Basic elements of R</b></span></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#what-is-r"><i class="fa fa-check"></i><b>1.1</b> What is R?</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="introduction.html"><a href="introduction.html#general-facts-about-r"><i class="fa fa-check"></i><b>1.1.1</b> General facts about R</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction.html"><a href="introduction.html#r-alternatives"><i class="fa fa-check"></i><b>1.1.2</b> R alternatives</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#installing-software-support"><i class="fa fa-check"></i><b>1.2</b> Installing Software Support</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#overview-of-the-development-interface-rstudio"><i class="fa fa-check"></i><b>1.3</b> Overview of the development interface <em>RStudio</em></a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introduction.html"><a href="introduction.html#interactive-console"><i class="fa fa-check"></i><b>1.3.1</b> Interactive console</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction.html"><a href="introduction.html#writing-r-scripts"><i class="fa fa-check"></i><b>1.3.2</b> Writing R scripts</a></li>
<li class="chapter" data-level="1.3.3" data-path="introduction.html"><a href="introduction.html#r-markdown"><i class="fa fa-check"></i><b>1.3.3</b> <em>R Markdown</em></a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#how-to-use-this-coursebook"><i class="fa fa-check"></i><b>1.4</b> How to use this coursebook?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tipovi.html"><a href="tipovi.html"><i class="fa fa-check"></i><b>2</b> Basic data types and operators</a>
<ul>
<li class="chapter" data-level="2.1" data-path="tipovi.html"><a href="tipovi.html#basic-data-types"><i class="fa fa-check"></i><b>2.1</b> Basic data types</a></li>
<li class="chapter" data-level="2.2" data-path="tipovi.html"><a href="tipovi.html#operators"><i class="fa fa-check"></i><b>2.2</b> Operators</a></li>
<li class="chapter" data-level="2.3" data-path="tipovi.html"><a href="tipovi.html#missing-unknown-and-non-existent-values"><i class="fa fa-check"></i><b>2.3</b> Missing, unknown, and non-existent values</a></li>
<li class="chapter" data-level="" data-path="tipovi.html"><a href="tipovi.html#homework-exercises"><i class="fa fa-check"></i>Homework exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="vektori.html"><a href="vektori.html"><i class="fa fa-check"></i><b>3</b> Vectors, matrices and lists</a>
<ul>
<li class="chapter" data-level="3.1" data-path="vektori.html"><a href="vektori.html#vector"><i class="fa fa-check"></i><b>3.1</b> Vector</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="vektori.html"><a href="vektori.html#creating-a-vector"><i class="fa fa-check"></i><b>3.1.1</b> Creating a vector</a></li>
<li class="chapter" data-level="3.1.2" data-path="vektori.html"><a href="vektori.html#vector-concatenation"><i class="fa fa-check"></i><b>3.1.2</b> Vector concatenation</a></li>
<li class="chapter" data-level="3.1.3" data-path="vektori.html"><a href="vektori.html#operator"><i class="fa fa-check"></i><b>3.1.3</b> Operator <code>[</code></a></li>
<li class="chapter" data-level="3.1.4" data-path="vektori.html"><a href="vektori.html#principles-of-vectorization-and-recycling"><i class="fa fa-check"></i><b>3.1.4</b> Principles of vectorization and recycling</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="vektori.html"><a href="vektori.html#index-vectors"><i class="fa fa-check"></i><b>3.2</b> Index vectors</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="vektori.html"><a href="vektori.html#positional-indexing"><i class="fa fa-check"></i><b>3.2.1</b> Positional Indexing</a></li>
<li class="chapter" data-level="3.2.2" data-path="vektori.html"><a href="vektori.html#conditional-indexing"><i class="fa fa-check"></i><b>3.2.2</b> Conditional indexing</a></li>
<li class="chapter" data-level="3.2.3" data-path="vektori.html"><a href="vektori.html#label-based-indexing"><i class="fa fa-check"></i><b>3.2.3</b> Label-based indexing</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="vektori.html"><a href="vektori.html#matrices-and-arrays"><i class="fa fa-check"></i><b>3.3</b> Matrices and arrays</a></li>
<li class="chapter" data-level="3.4" data-path="vektori.html"><a href="vektori.html#matrix-slicing"><i class="fa fa-check"></i><b>3.4</b> Matrix slicing</a></li>
<li class="chapter" data-level="3.5" data-path="vektori.html"><a href="vektori.html#example-3.2---matrix-slicing"><i class="fa fa-check"></i><b>3.5</b> Example 3.2 - matrix slicing</a></li>
<li class="chapter" data-level="3.6" data-path="vektori.html"><a href="vektori.html#lists"><i class="fa fa-check"></i><b>3.6</b> Lists</a></li>
<li class="chapter" data-level="" data-path="vektori.html"><a href="vektori.html#homework-exercises-1"><i class="fa fa-check"></i>Homework exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="okviri.html"><a href="okviri.html"><i class="fa fa-check"></i><b>4</b> Data frames and factors</a>
<ul>
<li class="chapter" data-level="4.1" data-path="okviri.html"><a href="okviri.html#data-frames"><i class="fa fa-check"></i><b>4.1</b> Data frames</a></li>
<li class="chapter" data-level="4.2" data-path="okviri.html"><a href="okviri.html#selecting-rows-and-columns"><i class="fa fa-check"></i><b>4.2</b> Selecting rows and columns</a>
<ul>
<li class="chapter" data-level="10.1.2" data-path="dates.html"><a href="dates.html"><i class="fa fa-check"></i><b>10.1.2</b> The<code>POSIXct</code> and<code>POSIXlt</code> classes</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="dates.html"><a href="dates.html#the-lubridate-package"><i class="fa fa-check"></i><b>10.2</b> The <code>lubridate</code> package</a></li>
<li class="chapter" data-level="10.3" data-path="dates.html"><a href="dates.html#working-with-character-strings"><i class="fa fa-check"></i><b>10.3</b> Working with character strings</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="dates.html"><a href="dates.html#text-analysis-and-regular-expressions"><i class="fa fa-check"></i><b>10.3.1</b> Text analysis and regular expressions</a></li>
<li class="chapter" data-level="10.3.2" data-path="dates.html"><a href="dates.html#the-stringr-package"><i class="fa fa-check"></i><b>10.3.2</b> The <code>stringr</code> package</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="dates.html"><a href="dates.html#exercise-tasks-1"><i class="fa fa-check"></i>Exercise Tasks</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Let’s program in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="objects" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">8</span> Object oriented systems in R<a href="objects.html#objects" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="object-oriented-systems-in-r" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Object-oriented systems in R<a href="objects.html#object-oriented-systems-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R is designed as an object-oriented language, together with the most commonly listed mechanisms that the object-oriented paradigm dictates: <em>encapsulation</em> (enveloping various attributes into a common entity), <em>polymorphism</em> (different classes of objects leveraging the same interface) and <em>inheritance</em> (new objects can be created from the existing ones by extending them with additional elements).</p>
<p>R has inherited its initial object modelling system from the S language, which resulted in these objects being known as “S3 objects” (S3 being the language version from which they were originally taken). This object model, as will be showcased very soon, is actually rather simple and unconventional, yet fairly suitable for using in R itself, it being primarily a domain-oriented language focused on data science-related tasks. However, with the continual influx of professional programmers into the R community, the pressure increased to bring support for “proper” objects that will be more similar to the way they work in the other programming languages, mostly in order to bring better robustness in design and management of objects.</p>
<p>At the time of this writing, we formally have four types of objects in the programming language R :</p>
<ul>
<li>“base” classes - denoting basic R elements (functions, vectors, data frames)</li>
<li>S3 objects - OOP system inherited from S language (version 3)</li>
<li>S4 objects - a more formal and rigorous OOP system approaching standard object-oriented mechanisms from other languages</li>
<li>RC objects (<em>reference classes</em>) - the most recent way of creating objects that replicates the “classical” object-oriented principles based on the exchange of messages; a subsystem of RC is called <em>R6</em>, offered by the package of the same name</li>
</ul>
<p>The existence of roughly three separate models of defining objects (we ignore the basic object model since we are interested in those that support the OOP principle) can seem disheartening - is it necessary to learn all three models? How to distinguish them? Which one to choose? However, despite the fact that the story about the object nature of R during its development is (unnecessarily) complicated, the good news is that for most needs, it’s quite enough to learn how the S3 model works, which is also the simplest. A large number of popular R packages use only S3 classes and it is possible to work in language R for a very long time without meeting the need for learning S4 or RC models. For this reason, we will mostly focus on the S3 objects, with a very brief overview of S4 (readers who want more information on other models, especially the RC one which is outside the scope of this coursebook, are strongly advised to check the book called <em>Advanced R</em>, by the author Hadley Wickham, which has multiple chapters devoted to object oriented programming in R).</p>
<hr />
</div>
<div id="overview-of-the-s3-object-model" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> Overview of the S3 object model<a href="objects.html#overview-of-the-s3-object-model" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As already mentioned, S3 objects are actually inherited from the S programming language and represent a relatively primitive implementation of the concept of “object”, as far as expectations go regarding standard mechanism of object creation management. This is most easily communicated with the following statement: <strong>An S3 object is merely a list which has an additional <code>class</code> attribute</strong>.</p>
<p>This means that an S3 object can be created in the following way:</p>
<p><strong>Example 8.1 - creating a new S3 object</strong></p>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="objects.html#cb297-1" aria-hidden="true" tabindex="-1"></a><span class="co"># we are creating a new object of a class `Person`</span></span>
<span id="cb297-2"><a href="objects.html#cb297-2" aria-hidden="true" tabindex="-1"></a>pero <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">id =</span> <span class="st">&quot;12345678&quot;</span>, <span class="at">surname =</span> <span class="st">&quot;Peric&quot;</span>, <span class="at">weight =</span> <span class="dv">78</span>)</span>
<span id="cb297-3"><a href="objects.html#cb297-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(pero) <span class="ot">&lt;-</span> <span class="st">&quot;Person&quot;</span></span></code></pre></div>
<p>Notice that we do not have a formally defined “class template” as is the established practice in other programming languages, it is only implied by the object’s structure. In practice however we would probably not expect from our users to construct objects “manually”, but rather to use a special constructor function whose parameters will ultimately define the object’s internal structure. The function would internally use the same code as above, possibly including some additional checks whether the parameters are defined correctly.</p>
<p>Let us create such a constructor function. For simplicity’s sake, let’s forgo for now the usual insistence on vectorization and assume users will always create a single “Person” object at a time (even though realistically you should aim for making functions which allow for creating of multiple objects at once, if possible and suitable for their planned use).</p>
<p><strong>Exercise 8.1 - constructor function</strong></p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="objects.html#cb298-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a function called `Person` </span></span>
<span id="cb298-2"><a href="objects.html#cb298-2" aria-hidden="true" tabindex="-1"></a><span class="co"># input parameters: id, surname, weight</span></span>
<span id="cb298-3"><a href="objects.html#cb298-3" aria-hidden="true" tabindex="-1"></a><span class="co"># returns: object of class &quot;Person&quot; </span></span>
<span id="cb298-4"><a href="objects.html#cb298-4" aria-hidden="true" tabindex="-1"></a><span class="co"># before creating the object function should check that:</span></span>
<span id="cb298-5"><a href="objects.html#cb298-5" aria-hidden="true" tabindex="-1"></a><span class="co">#      - id is a character vector, a string of 8 characters</span></span>
<span id="cb298-6"><a href="objects.html#cb298-6" aria-hidden="true" tabindex="-1"></a><span class="co">#      - surname is a character vector</span></span>
<span id="cb298-7"><a href="objects.html#cb298-7" aria-hidden="true" tabindex="-1"></a><span class="co">#      - weight is a numeric vector, larger then 0 </span></span>
<span id="cb298-8"><a href="objects.html#cb298-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb298-9"><a href="objects.html#cb298-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb298-10"><a href="objects.html#cb298-10" aria-hidden="true" tabindex="-1"></a><span class="co"># create `john`, a `Person` with the following characteristics:</span></span>
<span id="cb298-11"><a href="objects.html#cb298-11" aria-hidden="true" tabindex="-1"></a><span class="co"># id: 13571313, surname: Watson, weight: 76</span></span>
<span id="cb298-12"><a href="objects.html#cb298-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb298-13"><a href="objects.html#cb298-13" aria-hidden="true" tabindex="-1"></a><span class="co"># print `john`</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="objects.html#cb299-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a function called `Person` </span></span>
<span id="cb299-2"><a href="objects.html#cb299-2" aria-hidden="true" tabindex="-1"></a><span class="co"># input parameters: id, surname, weight</span></span>
<span id="cb299-3"><a href="objects.html#cb299-3" aria-hidden="true" tabindex="-1"></a><span class="co"># returns: object of class &quot;Person&quot; </span></span>
<span id="cb299-4"><a href="objects.html#cb299-4" aria-hidden="true" tabindex="-1"></a><span class="co"># function should check that:</span></span>
<span id="cb299-5"><a href="objects.html#cb299-5" aria-hidden="true" tabindex="-1"></a><span class="co">#      - id is a character vector, each character string 8 characters (`nchar` function!)</span></span>
<span id="cb299-6"><a href="objects.html#cb299-6" aria-hidden="true" tabindex="-1"></a><span class="co">#      - surname is a character vector</span></span>
<span id="cb299-7"><a href="objects.html#cb299-7" aria-hidden="true" tabindex="-1"></a><span class="co">#      - weight is a numeric vector, larger then 0 </span></span>
<span id="cb299-8"><a href="objects.html#cb299-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb299-9"><a href="objects.html#cb299-9" aria-hidden="true" tabindex="-1"></a>Person <span class="ot">&lt;-</span> <span class="cf">function</span>(id, surname, weight) {</span>
<span id="cb299-10"><a href="objects.html#cb299-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb299-11"><a href="objects.html#cb299-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stopifnot</span>(<span class="fu">is.character</span>(id) <span class="sc">&amp;&amp;</span> <span class="fu">nchar</span>(id) <span class="sc">==</span> <span class="dv">8</span>)</span>
<span id="cb299-12"><a href="objects.html#cb299-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stopifnot</span>(<span class="fu">is.character</span>(surname))</span>
<span id="cb299-13"><a href="objects.html#cb299-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stopifnot</span>(<span class="fu">is.numeric</span>(weight) <span class="sc">&amp;&amp;</span> weight <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb299-14"><a href="objects.html#cb299-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb299-15"><a href="objects.html#cb299-15" aria-hidden="true" tabindex="-1"></a>    p <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">id =</span> id, <span class="at">surname =</span> surname, <span class="at">weight =</span> weight)</span>
<span id="cb299-16"><a href="objects.html#cb299-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">class</span>(p) <span class="ot">&lt;-</span> <span class="st">&quot;Person&quot;</span></span>
<span id="cb299-17"><a href="objects.html#cb299-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb299-18"><a href="objects.html#cb299-18" aria-hidden="true" tabindex="-1"></a>    p</span>
<span id="cb299-19"><a href="objects.html#cb299-19" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div class="fold s o">
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="objects.html#cb300-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create `john`, a `Person` with the following characertistics:</span></span>
<span id="cb300-2"><a href="objects.html#cb300-2" aria-hidden="true" tabindex="-1"></a><span class="co"># id: 13571313, surname: Watson, weight: 76</span></span>
<span id="cb300-3"><a href="objects.html#cb300-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb300-4"><a href="objects.html#cb300-4" aria-hidden="true" tabindex="-1"></a><span class="co"># print `john`</span></span>
<span id="cb300-5"><a href="objects.html#cb300-5" aria-hidden="true" tabindex="-1"></a>john <span class="ot">&lt;-</span> <span class="fu">Person</span>(<span class="st">&quot;13571313&quot;</span>, <span class="st">&quot;Watson&quot;</span>, <span class="dv">76</span>)</span>
<span id="cb300-6"><a href="objects.html#cb300-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb300-7"><a href="objects.html#cb300-7" aria-hidden="true" tabindex="-1"></a>john</span></code></pre></div>
<pre><code>## $id
## [1] &quot;13571313&quot;
## 
## $surname
## [1] &quot;Watson&quot;
## 
## $weight
## [1] 76
## 
## attr(,&quot;class&quot;)
## [1] &quot;Person&quot;</code></pre>
</div>
<hr />
<p>As we can see, the obvious advantage of making constructor functions for our S3 objects is additional robustness in the form of object’s structure being enforced by the way the constructor function is called, as well as the capabilities of embedding additional checks and requirements inside the constructor code.</p>
<hr />
<p>Let’s now talk about inheritance, i.e. a mechanism which allows for creating new objects (or classes) out of the existing ones, inheriting their current features while adding new (or modifying the inherited) ones.</p>
<p>The S3 OOP system enables inheritance, but again in a very informal and relatively trivial way. Similar to how we created an object of a certain class by simply taking a list and declaring it is a member of a certain class through the <code>class</code> attribute, we can also use this very same attribute to list the “parents” of the class, i.e. classes that this object is inheriting features from. The names of parent classes should be placed in the same character vector as the class name, so they follow immediately after, sorted by ‘importance’. For example, the following code creates a new <code>mate</code> object of class <code>Employee</code> which inherits the class <code>Person</code>:</p>
<p><strong>Example 8.2 - inheriting an S3 object</strong></p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="objects.html#cb302-1" aria-hidden="true" tabindex="-1"></a>mate <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">id =</span> <span class="st">&quot;12345678&quot;</span>, <span class="at">lastname =</span> <span class="st">&quot;Peric&quot;</span>, <span class="at">weight =</span> <span class="dv">78</span>, <span class="at">yearEmpl =</span> <span class="dv">2001</span>)</span>
<span id="cb302-2"><a href="objects.html#cb302-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(mate) <span class="ot">&lt;-</span> <span class="fu">c</span> (<span class="st">&quot;Employee&quot;</span>, <span class="st">&quot;Person&quot;</span>)</span></code></pre></div>
<p>Again, a better solution would of course be creating a new constructor function which would take care to properly inherit the parent structure, and quite possibly integrate the constructor function of the parent object themselves in the construction process.</p>
</div>
<div id="generic-functions" class="section level2 hasAnchor" number="8.3">
<h2><span class="header-section-number">8.3</span> Generic functions<a href="objects.html#generic-functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Looking at the above way of designing objects, we can notice that we completely avoided discussion of an important feature of any OOP system - the methods, i.e. functions that are being encapsulated inside an object. And here we come to one of the more striking differences between the S3 object model and the “standard” OOP systems we might be familiar with from the other programming languages - <em>in the S3 object model the methods are defined <strong>outside of the objects themselves</strong>, in the form of so-called <strong>generic functions</strong>.</em></p>
<p>This should not necessarily be so unusual as it initially seems. If we go back to the original description of polymorphism, we can see the basic idea should be that the user is able to ask for executing similar functions (eg “print”, “draw”, “summary description”) over objects of different types. The “generic” expected functionality of a chosen function should be the same, but the specifics would differ depending on the object itself - hence the name <strong>generic function</strong>. For example, we expect that the <code>print</code> function will always results in some kind of printout on screen, but how this printout ultimately looks will depend on the specifics of the object we are printing.</p>
<p>This way of designing an object can seem rather unconventional, but the fact stands that the code that uses generic functions instead of encapsulated methods tends to look far more intuitive, especially for users who do not have an extensive background in programming. Specifically, let’s compare a hypothetical command:</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="objects.html#cb303-1" aria-hidden="true" tabindex="-1"></a><span class="fu">start</span>(car, <span class="at">speed =</span> <span class="dv">20</span>)</span></code></pre></div>
<p>with the command:</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="objects.html#cb304-1" aria-hidden="true" tabindex="-1"></a><span class="fu">car.start</span>(<span class="at">speed =</span> <span class="dv">20</span>)</span></code></pre></div>
<p>By reading the first command, the car is perceived as an “object” (in grammatical terms), that is, an entity we ask for something to be performed on. The second command sets the car as a “subject”, which is a common practice of the object-oriented languages, but is not in line with the general understanding of how we perceive performing tasks, especially in data analysis - we manipulate and transform datasets and we draw plots, as opposed to asking data to manipulate themselves or a plot to get itself drawn.</p>
<p>So to sum up, R is designed in such a fashion that enforces thinking about <strong>what</strong> we want to do instead of asking ourselves <strong>where</strong> the function we want to call is. If we want to print an object, it is logical to just simply forward it to the <code>print</code> function, and if we want to get a brief summary about it, we try calling the <code>summary</code> function.</p>
<p>The big question is of course - how can one single function “know” what to do with an object? Does it need to have the implementation code for every single class it could conceivably be called on? The answer is actually rather simple - the generic function is just an “interface” to the function we “actually” want to call, and the programmer of the object (or class) is responsible for creating a separate code with the implementation logic. The trick is merely in taking care to follow the naming convention - if the generic function is called <code>genFun</code>, and the name of the object class is <code>className</code>, the function storing the implementation code needs to be called <code>genFun.className</code>, and should be available in the search path when the generic function is called. If no such function exists, than the function <code>genFun.default</code> will be called instead.</p>
<p>We can see the proof of this in the next exercise.</p>
<p><strong>Exercise 8.2 - generic functions</strong></p>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="objects.html#cb305-1" aria-hidden="true" tabindex="-1"></a><span class="co"># print the source code `summary` function (just use the function name!)</span></span>
<span id="cb305-2"><a href="objects.html#cb305-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb305-3"><a href="objects.html#cb305-3" aria-hidden="true" tabindex="-1"></a><span class="co"># print the source code of a function actually being called when you call</span></span>
<span id="cb305-4"><a href="objects.html#cb305-4" aria-hidden="true" tabindex="-1"></a><span class="co"># the `summary` function of the `factor` class object</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="objects.html#cb306-1" aria-hidden="true" tabindex="-1"></a><span class="co"># print the `summary` function (only the function name!)</span></span>
<span id="cb306-2"><a href="objects.html#cb306-2" aria-hidden="true" tabindex="-1"></a>summary</span>
<span id="cb306-3"><a href="objects.html#cb306-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb306-4"><a href="objects.html#cb306-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb306-5"><a href="objects.html#cb306-5" aria-hidden="true" tabindex="-1"></a><span class="co"># print the source code of a function actually being called when you call</span></span>
<span id="cb306-6"><a href="objects.html#cb306-6" aria-hidden="true" tabindex="-1"></a><span class="co"># the `summary` function of the `factor` class object</span></span>
<span id="cb306-7"><a href="objects.html#cb306-7" aria-hidden="true" tabindex="-1"></a>summary.factor</span></code></pre></div>
<pre><code>## function (object, ...) 
## UseMethod(&quot;summary&quot;)
## &lt;bytecode: 0x00000281ab2c43e0&gt;
## &lt;environment: namespace:base&gt;
## function (object, maxsum = 100L, ...) 
## {
##     nas &lt;- is.na(object)
##     ll &lt;- levels(object)
##     if (ana &lt;- any(nas)) 
##         maxsum &lt;- maxsum - 1L
##     tbl &lt;- table(object)
##     tt &lt;- c(tbl)
##     names(tt) &lt;- dimnames(tbl)[[1L]]
##     if (length(ll) &gt; maxsum) {
##         drop &lt;- maxsum:length(ll)
##         o &lt;- sort.list(tt, decreasing = TRUE)
##         tt &lt;- c(tt[o[-drop]], `(Other)` = sum(tt[o[drop]]))
##     }
##     if (ana) 
##         c(tt, `NA&#39;s` = sum(nas))
##     else tt
## }
## &lt;bytecode: 0x00000281ac3c3838&gt;
## &lt;environment: namespace:base&gt;</code></pre>
<div id="adding-generic-functions-to-an-object" class="section level2 hasAnchor" number="8.4">
<h2><span class="header-section-number">8.4</span> Adding generic functions to an object<a href="objects.html#adding-generic-functions-to-an-object" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The properties of the generic function are as follows:</p>
<ul>
<li>the function has an intuitive, clearly defined purpose</li>
<li>expected mode of operation is similar for multiple object types (e.g. drawing will always result in an image of sorts)</li>
<li>each type of object requires its own implementation depending on the characteristics of the object (e.g. the way the method of drawing the circle differs from drawing a square)</li>
</ul>
<p>The method of implementing generic functions (for S3 objects!) is actually extremely simple, which is probably the reason for their wide acceptance and great popularity in the R community. The process is reduced to three simple steps:</p>
<ul>
<li>choose the name of a generic function and declare that it is a generic function with the help of a function called <code>UseMethod</code>
<ul>
<li>alternatively, ignore this step and choose one of the existing generic functions (often a much better choice!)</li>
</ul></li>
<li>create an object and declare its class</li>
<li>implement the function called <code>&lt;gen_function_name&gt;.&lt;class_name&gt;</code></li>
<li>(optional) if you created a completely new generic function, consider implementing <code>&lt;gen_function_name&gt;.default</code> function and as many other implementation functions as you want, if you think the function should work on other types of objects, too</li>
</ul>
<p>And that’s all! R does not require any additional steps, the above is quite sufficient for R to recognize the new generic function and apply it to all objects for whose class this generic function is implemented in the form <code>gen_function_name.class_name</code> (or <code>gen_function_name.default</code> for all classes for which there is no special implementation).</p>
<p>In the next exercise, let’s try to implement the generic <code>infoAbout</code> method for the <code>Person</code> class.</p>
<hr />
<p><strong>Exercise 8.3 - new generic function</strong></p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="objects.html#cb308-1" aria-hidden="true" tabindex="-1"></a>peter <span class="ot">&lt;-</span> <span class="fu">Person</span>(<span class="at">id =</span> <span class="st">&quot;12345678&quot;</span>, <span class="at">surname =</span> <span class="st">&quot;Parker&quot;</span>, <span class="at">weight =</span> <span class="dv">78</span>)</span>
<span id="cb308-2"><a href="objects.html#cb308-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb308-3"><a href="objects.html#cb308-3" aria-hidden="true" tabindex="-1"></a><span class="co"># create a new generic `infoAbout` function using the `UseMethod` function</span></span>
<span id="cb308-4"><a href="objects.html#cb308-4" aria-hidden="true" tabindex="-1"></a>infoAbout <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">UseMethod</span>(<span class="st">&quot;infoAbout&quot;</span>)</span>
<span id="cb308-5"><a href="objects.html#cb308-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb308-6"><a href="objects.html#cb308-6" aria-hidden="true" tabindex="-1"></a><span class="co"># implement a `infoAbout.Person` function which takes a `Person`</span></span>
<span id="cb308-7"><a href="objects.html#cb308-7" aria-hidden="true" tabindex="-1"></a><span class="co"># and writes the following on screen</span></span>
<span id="cb308-8"><a href="objects.html#cb308-8" aria-hidden="true" tabindex="-1"></a><span class="co"># ID: &lt;id&gt;, surname: &lt;surname&gt;, weight: &lt;weight&gt;</span></span>
<span id="cb308-9"><a href="objects.html#cb308-9" aria-hidden="true" tabindex="-1"></a><span class="co"># use the `paste` function to prepare the printout</span></span>
<span id="cb308-10"><a href="objects.html#cb308-10" aria-hidden="true" tabindex="-1"></a><span class="co"># and `cat` to put it on screen</span></span>
<span id="cb308-11"><a href="objects.html#cb308-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb308-12"><a href="objects.html#cb308-12" aria-hidden="true" tabindex="-1"></a><span class="co"># implement a `infoAbout.default` function</span></span>
<span id="cb308-13"><a href="objects.html#cb308-13" aria-hidden="true" tabindex="-1"></a><span class="co"># which simply fowards the input parameter to the `cat` function</span></span>
<span id="cb308-14"><a href="objects.html#cb308-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb308-15"><a href="objects.html#cb308-15" aria-hidden="true" tabindex="-1"></a><span class="co"># call `infoAbout` with `peter` as parameter</span></span>
<span id="cb308-16"><a href="objects.html#cb308-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb308-17"><a href="objects.html#cb308-17" aria-hidden="true" tabindex="-1"></a><span class="co"># call `infoAbout` with `1:5` as parameter</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="objects.html#cb309-1" aria-hidden="true" tabindex="-1"></a><span class="co"># implement a `infoAbout.Person` function which takes a `Person`</span></span>
<span id="cb309-2"><a href="objects.html#cb309-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and writes the following on screen</span></span>
<span id="cb309-3"><a href="objects.html#cb309-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ID: &lt;id&gt;, surname: &lt;surname&gt;, weight: &lt;weight&gt;</span></span>
<span id="cb309-4"><a href="objects.html#cb309-4" aria-hidden="true" tabindex="-1"></a><span class="co"># use the `paste` function to prepare the printout</span></span>
<span id="cb309-5"><a href="objects.html#cb309-5" aria-hidden="true" tabindex="-1"></a><span class="co"># and `cat` to put it on screen</span></span>
<span id="cb309-6"><a href="objects.html#cb309-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb309-7"><a href="objects.html#cb309-7" aria-hidden="true" tabindex="-1"></a>infoAbout.Person <span class="ot">&lt;-</span> <span class="cf">function</span>(p) {</span>
<span id="cb309-8"><a href="objects.html#cb309-8" aria-hidden="true" tabindex="-1"></a>    rez <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;ID:&quot;</span>, p<span class="sc">$</span>id, <span class="st">&quot;, surname:&quot;</span>, p<span class="sc">$</span>surname, <span class="st">&quot;, weight:&quot;</span>, p<span class="sc">$</span>weight, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb309-9"><a href="objects.html#cb309-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(rez)</span>
<span id="cb309-10"><a href="objects.html#cb309-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb309-11"><a href="objects.html#cb309-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb309-12"><a href="objects.html#cb309-12" aria-hidden="true" tabindex="-1"></a><span class="co"># implement a `infoAbout.default` function</span></span>
<span id="cb309-13"><a href="objects.html#cb309-13" aria-hidden="true" tabindex="-1"></a><span class="co"># which simply fowards the input parameter to the `cat` function</span></span>
<span id="cb309-14"><a href="objects.html#cb309-14" aria-hidden="true" tabindex="-1"></a>infoAbout.default <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">cat</span>(x)</span>
<span id="cb309-15"><a href="objects.html#cb309-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb309-16"><a href="objects.html#cb309-16" aria-hidden="true" tabindex="-1"></a><span class="co"># call `infoAbout` with `peter` as parameter</span></span>
<span id="cb309-17"><a href="objects.html#cb309-17" aria-hidden="true" tabindex="-1"></a><span class="fu">infoAbout</span>(peter)</span>
<span id="cb309-18"><a href="objects.html#cb309-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb309-19"><a href="objects.html#cb309-19" aria-hidden="true" tabindex="-1"></a><span class="co"># call `infoAbout` with `1:5` as parameter</span></span>
<span id="cb309-20"><a href="objects.html#cb309-20" aria-hidden="true" tabindex="-1"></a><span class="fu">infoAbout</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## ID:12345678, surname:Parker, weight:78
## 1 2 3 4 5</code></pre>
</div>
<hr />
<p>Of course, it doesn’t really make sense to have our own function for printing out stuff on screen when there are already perfectly good generic function for that purpose such as <code>print</code> or <code>cat</code>. With that in mind, let’s augment the <code>print</code> function so it works with our <code>Person</code> objects. Since we have already created our <code>infoAbout</code> function, and we are already armed with the knowledge that functions are first-class objects, it should be trivial to allow for <code>Person</code> objects to be nicely printed on screen with <code>print</code>.</p>
<hr />
<p><strong>Exercise 8.4 - augmenting the existing generic functions</strong></p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="objects.html#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="co"># make sure `print` is a generic function</span></span>
<span id="cb311-2"><a href="objects.html#cb311-2" aria-hidden="true" tabindex="-1"></a><span class="co"># (print out its source code by referencing its name)</span></span>
<span id="cb311-3"><a href="objects.html#cb311-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb311-4"><a href="objects.html#cb311-4" aria-hidden="true" tabindex="-1"></a><span class="co"># augment the `print` function so it allows pretty printing</span></span>
<span id="cb311-5"><a href="objects.html#cb311-5" aria-hidden="true" tabindex="-1"></a><span class="co"># of the `Person` class</span></span>
<span id="cb311-6"><a href="objects.html#cb311-6" aria-hidden="true" tabindex="-1"></a><span class="co"># (you may use the already created `infoAbout.Person` function)</span></span>
<span id="cb311-7"><a href="objects.html#cb311-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb311-8"><a href="objects.html#cb311-8" aria-hidden="true" tabindex="-1"></a><span class="co"># call `print` with `peter` as parameter (or try the autoprint!)</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="objects.html#cb312-1" aria-hidden="true" tabindex="-1"></a><span class="co"># make sure `print` is a generic function</span></span>
<span id="cb312-2"><a href="objects.html#cb312-2" aria-hidden="true" tabindex="-1"></a><span class="co"># (print out its source code by referencing its name)</span></span>
<span id="cb312-3"><a href="objects.html#cb312-3" aria-hidden="true" tabindex="-1"></a>print</span>
<span id="cb312-4"><a href="objects.html#cb312-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb312-5"><a href="objects.html#cb312-5" aria-hidden="true" tabindex="-1"></a><span class="co"># augmnet the `print` function so it allows pretty printing</span></span>
<span id="cb312-6"><a href="objects.html#cb312-6" aria-hidden="true" tabindex="-1"></a><span class="co"># of the `Person` class</span></span>
<span id="cb312-7"><a href="objects.html#cb312-7" aria-hidden="true" tabindex="-1"></a><span class="co"># (you may use the already created `infoAbout.Person` class)</span></span>
<span id="cb312-8"><a href="objects.html#cb312-8" aria-hidden="true" tabindex="-1"></a>print.Person <span class="ot">&lt;-</span> infoAbout.Person</span>
<span id="cb312-9"><a href="objects.html#cb312-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb312-10"><a href="objects.html#cb312-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb312-11"><a href="objects.html#cb312-11" aria-hidden="true" tabindex="-1"></a><span class="co"># call `print` with `peter` as parameter (or try the autoprint!)</span></span>
<span id="cb312-12"><a href="objects.html#cb312-12" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(peter)</span></code></pre></div>
<pre><code>## function (x, ...) 
## UseMethod(&quot;print&quot;)
## &lt;bytecode: 0x00000281a6c9f940&gt;
## &lt;environment: namespace:base&gt;
## ID:12345678, surname:Parker, weight:78</code></pre>
</div>
<p>***.</p>
<p>Finally, we demonstrate the ability of R to list all the currently known implementations of a generic method. To do this we simply use the <code>methods</code> function to which we pass the name of the method concerned. With the same function we can also check which generic functions implementations exist for a particular class. For this we use the <code>class</code> parameter to which we are passing the class name for which we are interested in finding generic functions implemented for it.</p>
<hr />
<p><strong>Exercise 8.5 - <code>methods</code> function</strong></p>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="objects.html#cb314-1" aria-hidden="true" tabindex="-1"></a><span class="co"># list all implementations of the `summary` function</span></span>
<span id="cb314-2"><a href="objects.html#cb314-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb314-3"><a href="objects.html#cb314-3" aria-hidden="true" tabindex="-1"></a><span class="co"># check with generic function implementations exist for the `factor` class</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="objects.html#cb315-1" aria-hidden="true" tabindex="-1"></a><span class="co"># list all implementations of the `summary` function</span></span>
<span id="cb315-2"><a href="objects.html#cb315-2" aria-hidden="true" tabindex="-1"></a><span class="co">#methods(summary)   # try on console!</span></span>
<span id="cb315-3"><a href="objects.html#cb315-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb315-4"><a href="objects.html#cb315-4" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;-----------------------</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb315-5"><a href="objects.html#cb315-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb315-6"><a href="objects.html#cb315-6" aria-hidden="true" tabindex="-1"></a><span class="co"># check with generic function implementations exist for the `factor` class</span></span>
<span id="cb315-7"><a href="objects.html#cb315-7" aria-hidden="true" tabindex="-1"></a><span class="fu">methods</span>(<span class="at">class =</span> <span class="st">&quot;factor&quot;</span>)</span></code></pre></div>
<pre><code>## -----------------------
##  [1] /             [             [[            [[&lt;-          [&lt;-          
##  [6] +             all.equal     as.character  as.data.frame as.Date      
## [11] as.duration   as.interval   as.list       as.logical    as.period    
## [16] as.POSIXlt    as.vector     as_date       as_datetime   as_factor    
## [21] c             coerce        Compare       corresp       droplevels   
## [26] format        initialize    is.na&lt;-       length&lt;-      levels&lt;-     
## [31] Math          Ops           plot          print         recode       
## [36] relevel       relist        rep           scale_type    show         
## [41] slotsFromS3   summary       Summary       type_sum      xtfrm        
## see &#39;?methods&#39; for accessing help and source code</code></pre>
</div>
<div id="conclusion-on-s3-objects" class="section level3 hasAnchor" number="8.4.1">
<h3><span class="header-section-number">8.4.1</span> Conclusion on S3 objects<a href="objects.html#conclusion-on-s3-objects" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In short, the conclusions about S3 objects can be as follows:</p>
<ul>
<li>S3 objects function in <strong>in a simple, informal way</strong> - they are simply lists with the arbitrary value of <code>class</code> attributes</li>
<li>the S3 object methods are not encapsulated within the objects, but are designed “out of” objects in the form of generic functions</li>
<li>much of this is left to <strong>the responsibility of the programmer</strong> who should enforce the object structure through *constructor functions<strong> and the way to handle objects through </strong>generic function implementations**</li>
<li>S3 objects <strong>are not suitable for complex object models</strong> due to heavy model maintenance and large potential of errors</li>
</ul>
<hr />
</div>
</div>
<div id="short-overview-of-s4-objects" class="section level2 hasAnchor" number="8.5">
<h2><span class="header-section-number">8.5</span> Short overview of S4 objects<a href="objects.html#short-overview-of-s4-objects" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We will not be dealing with S4 objects in detail, but will provide a very brief overview how they look and what are some of the most significant changes from the S3 model.</p>
<p>S4 objects offer a slight “upgrade” on S3 objects in the sense that they dictate more strictness and formality when defining and using classes, while still retaining most of the simplicity of the S3 model. The most notable (and arguably welcome) change is allowing for a formal definition of a class template.</p>
<p>An S4 class has three main properties:</p>
<ul>
<li>name, which identifies it</li>
<li>representation, which describes its attributes (called “slots”)</li>
<li>(optionally) a vector of parent classes (that it “contains”)</li>
</ul>
<p>The S4 equivalent of our S3 <code>Person</code> class would therefore look like this:</p>
<p><strong>Example 8.3 - creating a new S4 class</strong></p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="objects.html#cb317-1" aria-hidden="true" tabindex="-1"></a><span class="co"># template definition</span></span>
<span id="cb317-2"><a href="objects.html#cb317-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setClass</span>(<span class="st">&quot;Person&quot;</span>, <span class="fu">representation</span>(<span class="at">id =</span> <span class="st">&quot;character&quot;</span>, </span>
<span id="cb317-3"><a href="objects.html#cb317-3" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">surname =</span> <span class="st">&quot;character&quot;</span>,</span>
<span id="cb317-4"><a href="objects.html#cb317-4" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">weight =</span> <span class="st">&quot;numeric&quot;</span>))</span>
<span id="cb317-5"><a href="objects.html#cb317-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-6"><a href="objects.html#cb317-6" aria-hidden="true" tabindex="-1"></a><span class="co"># class instantiation</span></span>
<span id="cb317-7"><a href="objects.html#cb317-7" aria-hidden="true" tabindex="-1"></a>pero <span class="ot">&lt;-</span> <span class="fu">new</span>(<span class="st">&quot;Person&quot;</span>, <span class="at">id =</span> <span class="st">&quot;12345678&quot;</span>, </span>
<span id="cb317-8"><a href="objects.html#cb317-8" aria-hidden="true" tabindex="-1"></a>                      <span class="at">surname =</span> <span class="st">&quot;peric&quot;</span>, </span>
<span id="cb317-9"><a href="objects.html#cb317-9" aria-hidden="true" tabindex="-1"></a>                      <span class="at">weight =</span> <span class="dv">76</span>)</span></code></pre></div>
<p>Another difference is that instead of <code>$</code> you use the <code>@</code> operator to access the attributes (slots) of a class. Also, the function <code>getSlots</code> will return all the slots of the class in question.</p>
<p><strong>Example 8.4 - accessing S4 class slots</strong></p>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="objects.html#cb318-1" aria-hidden="true" tabindex="-1"></a><span class="co"># list class `Person` slots</span></span>
<span id="cb318-2"><a href="objects.html#cb318-2" aria-hidden="true" tabindex="-1"></a><span class="fu">getSlots</span>(<span class="st">&quot;Person&quot;</span>)</span>
<span id="cb318-3"><a href="objects.html#cb318-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb318-4"><a href="objects.html#cb318-4" aria-hidden="true" tabindex="-1"></a><span class="co"># retrieve slot values from `pero` instance </span></span>
<span id="cb318-5"><a href="objects.html#cb318-5" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(pero<span class="sc">@</span>id, <span class="st">&quot;: &quot;</span>, pero<span class="sc">@</span>surname)</span></code></pre></div>
<pre><code>##          id     surname      weight 
## &quot;character&quot; &quot;character&quot;   &quot;numeric&quot; 
## [1] &quot;12345678: peric&quot;</code></pre>
<p>S4 also leverages generic functions, but with certain differences when it comes to the syntax of creating them. We will not delve into specifics and will just briefly show one way of assigning existing generics to a new S4 object through the usage of a <code>setMethod</code> function.</p>
<p><strong>Example 8.5 - S4 objects and generics</strong></p>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="objects.html#cb320-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setMethod</span>(<span class="st">&quot;print&quot;</span>, </span>
<span id="cb320-2"><a href="objects.html#cb320-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">signature</span>(<span class="at">x =</span> <span class="st">&quot;Person&quot;</span>),</span>
<span id="cb320-3"><a href="objects.html#cb320-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) {</span>
<span id="cb320-4"><a href="objects.html#cb320-4" aria-hidden="true" tabindex="-1"></a>    rez <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;ID:&quot;</span>, x<span class="sc">@</span>id, <span class="st">&quot;, surname:&quot;</span>, x<span class="sc">@</span>surname, <span class="st">&quot;, weight:&quot;</span>, x<span class="sc">@</span>weight, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb320-5"><a href="objects.html#cb320-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(rez)</span>
<span id="cb320-6"><a href="objects.html#cb320-6" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb320-7"><a href="objects.html#cb320-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb320-8"><a href="objects.html#cb320-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(pero)</span></code></pre></div>
<pre><code>## ID:12345678, surname:peric, weight:76</code></pre>
<p>And this is where we finish our overview of R’s OOP systems. As stated, the S3 objects are still the most prevalent, and S4 are worth knowing if you come upon them in certain packages (even though most of the time it’s enough to remember to use the <code>@</code> operator instead of <code>$</code> to extract their attributes). As for other types of objects (including the relatively popular RC or R6 classes), they are outside the scope of this course and will be left as optional concepts to discover on your own. In general, R is probably not the best choice for implementing software solutions that heavily rely on intricate object-oriented architectures - but regardless of that, there are packages and models that allow this, with ever rising support and new features, so there is always an option of going down this road if the need arises.</p>
<hr />
</div>
<div id="homework-exercises-6" class="section level2 unnumbered hasAnchor">
<h2>Homework exercises<a href="objects.html#homework-exercises-6" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The following exercises all assume usage of S3 classes.</p>
<ol style="list-style-type: decimal">
<li><p>Create a class object <code>Block</code> with the attributes <code>height</code>, <code>width</code> and <code>depth</code> equal to<code>10</code>, <code>20</code> and <code>30</code> respectively.</p></li>
<li><p>Implement a constructor for the class <code>Employee</code> which inherits the <code>Person</code> class defined by the following constructor and print implemenation:</p></li>
</ol>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="objects.html#cb322-1" aria-hidden="true" tabindex="-1"></a>Person <span class="ot">&lt;-</span> <span class="cf">function</span>(id, surname, weight) {</span>
<span id="cb322-2"><a href="objects.html#cb322-2" aria-hidden="true" tabindex="-1"></a>    p <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">id =</span> id, <span class="at">surname =</span> surname, <span class="at">weight =</span> weight)</span>
<span id="cb322-3"><a href="objects.html#cb322-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">class</span>(p) <span class="ot">&lt;-</span> <span class="st">&quot;Person&quot;</span></span>
<span id="cb322-4"><a href="objects.html#cb322-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb322-5"><a href="objects.html#cb322-5" aria-hidden="true" tabindex="-1"></a>    p</span>
<span id="cb322-6"><a href="objects.html#cb322-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb322-7"><a href="objects.html#cb322-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb322-8"><a href="objects.html#cb322-8" aria-hidden="true" tabindex="-1"></a>print.Person <span class="ot">&lt;-</span> <span class="cf">function</span>(p) {</span>
<span id="cb322-9"><a href="objects.html#cb322-9" aria-hidden="true" tabindex="-1"></a>    rez <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;ID:&quot;</span>, p<span class="sc">$</span>id, <span class="st">&quot;, surname:&quot;</span>, p<span class="sc">$</span>surname, <span class="st">&quot;, weight:&quot;</span>, p<span class="sc">$</span>weight, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb322-10"><a href="objects.html#cb322-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(rez)</span>
<span id="cb322-11"><a href="objects.html#cb322-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><code>Employee</code> has all the attributes of the <code>Person</code> class as well as the <code>superior</code> attribute which represents a reference to a employee who is his/her superior (if such exists, otherwise it should be <code>NA</code>).</p>
<p>Create two objects of the <code>Employee</code> class (one superior to another) and print them with the <code>print</code> function. Then implement your own version of the generic function <code>print</code> for the <code>Employee</code> class that prints employee data and his/her superior employee data (if it exists, otherwise it prints a message that there is no superior employee). Reprint both employees with the <code>print</code> function.</p>
<hr />
<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Programirajmo u R-u</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="https://www.fer.unizg.hr/en/damir.pintar" property="cc:attributionName" rel="cc:attributionURL">Damir Pintar</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>.<br />Based on a work at <a xmlns:dct="http://purl.org/dc/terms/" href="https://ratnip.github.io/FER_OPJR/" rel="dct:source">https://ratnip.github.io/FER_OPJR/</a></p>

</div>



            </section>

          </div>
        </div>
      </div>
<a href="user.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="pipe.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"],
"google": false,
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed",
"edit": null,
"download": null,
"search": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
